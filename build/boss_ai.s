;
; File generated by cc65 v 2.18 - N/A
;
	.fopt		compiler,"cc65 v 2.18 - N/A"
	.setcpu		"6502"
	.smart		on
	.autoimport	on
	.case		on
	.debuginfo	off
	.importzp	sp, sreg, regsave, regbank
	.importzp	tmp1, tmp2, tmp3, tmp4, ptr1, ptr2, ptr3, ptr4
	.macpack	longbranch
	.export		_boss_ai_idle
	.export		_boss_ai_ascending
	.export		_boss_ai_descending
	.export		_boss_ai_damaged
	.export		_boss_ai_dying
	.export		_collision_with_boss
	.export		_draw_boss_flying
	.export		_draw_boss_idle
	.export		_draw_boss_dying
	.importzp	_TEMP
	.import		_music_play
	.import		_music_stop
	.import		_sfx_play
	.import		_rand8
	.import		_add_scroll_y_fast_sub
	.import		_sub_scroll_y
	.import		_metatile_property_lookup_table
	.importzp	_temp0
	.importzp	_temp1
	.importzp	_temp2
	.importzp	_temp3
	.importzp	_temp4
	.importzp	_x
	.importzp	_temp_x
	.importzp	_coordinates
	.importzp	_collision
	.importzp	_collision_U
	.importzp	_collision_D
	.importzp	_collision_L
	.importzp	_collision_R
	.importzp	_player_flags
	.importzp	_enemy_is_using_bg_collision
	.importzp	_game_mode
	.importzp	_game_level_advance_behavior
	.importzp	_temp5
	.importzp	_temp6
	.importzp	_temppointer
	.importzp	_temp_mutablepointer
	.importzp	_hitbox
	.importzp	_valrigard
	.import		_cmaps
	.import		_boss_body_sprite_idle_lookup_table
	.import		_boss_body_sprite_flying_lookup_table
	.import		_boss_dying_sprite_lookup_table
	.import		_boss_dialog
	.import		_active_dboxdata
	.import		_enemies_x
	.import		_enemies_y
	.import		_enemies_actual_y
	.import		_enemies_nt
	.import		_enemies_flags
	.import		_enemies_type
	.import		_enemies_extra
	.import		_enemies_timer
	.import		_boss_state
	.import		_boss_memory
	.import		_trigger_dialog_box
	.import		_fire_at_target
	.import		_cannonball_ai_sub
	.import		_bg_collision
	.export		_boss_shoot_fireball
	.export		_boss_start_flying
	.export		_boss_ai_intro
	.export		_boss_collide_sub
	.export		_boss_state_deadliness

.segment	"RODATA"

_boss_state_deadliness:
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$00
	.byte	$00

; ---------------------------------------------------------------
; void __near__ boss_ai_idle (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_boss_ai_idle: near

.segment	"CODE"

;
; if (temp0 == enemies_extra[x]) {
;
	ldy     _x
	lda     _enemies_extra,y
	cmp     _temp0
;
; boss_start_flying(); // Start flying
;
	jeq     _boss_start_flying
;
; }
;
	rts

.endproc

; ---------------------------------------------------------------
; void __near__ boss_ai_ascending (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_boss_ai_ascending: near

.segment	"CODE"

;
; temp1 = BOSS_BRADS_TARGET;
;
	lda     _boss_memory
	sta     _temp1
;
; cannonball_ai_sub();
;
	jsr     _cannonball_ai_sub
;
; if (temp0 & 1) { cannonball_ai_sub(); }
;
	lda     _temp0
	and     #$01
	beq     L024E
	jsr     _cannonball_ai_sub
;
; enemy_is_using_bg_collision = 1;
;
L024E:	lda     #$01
	sta     _enemy_is_using_bg_collision
;
; hitbox.x = enemies_x[x];
;
	ldy     _x
	lda     _enemies_x,y
	sta     _hitbox
;
; hitbox.y = enemies_y[x];
;
	ldy     _x
	lda     _enemies_y,y
	sta     _hitbox+1
;
; hitbox.width = 16;
;
	lda     #$10
	sta     _hitbox+2
;
; hitbox.height = 16;
;
	sta     _hitbox+3
;
; bg_collision();
;
	jsr     _bg_collision
;
; if (collision_U >= 2 && !CANNONBALL_Y_DIRECTION(x)) { CANNONBALL_SET_POS_Y(x); } 
;
	lda     _collision_U
	cmp     #$02
	bcc     L0252
	ldy     _x
	lda     _enemies_flags,y
	and     #$20
	bne     L0252
	ldy     _x
	lda     _enemies_flags,y
	ora     #$20
;
; else if (collision_D >= 2 && CANNONBALL_Y_DIRECTION(x)) { CANNONBALL_SET_NEG_Y(x); }
;
	jmp     L024C
L0252:	lda     _collision_D
	cmp     #$02
	bcc     L0256
	ldy     _x
	lda     _enemies_flags,y
	and     #$20
	beq     L0256
	ldy     _x
	lda     _enemies_flags,y
	and     #$DF
L024C:	sta     _enemies_flags,y
;
; if (collision_L >= 2 && !CANNONBALL_X_DIRECTION(x)) { CANNONBALL_SET_POS_X(x); }
;
L0256:	lda     _collision_L
	cmp     #$02
	bcc     L025A
	ldy     _x
	lda     _enemies_flags,y
	and     #$40
	bne     L025A
	ldy     _x
	lda     _enemies_flags,y
	ora     #$40
;
; else if (collision_R >= 2 && CANNONBALL_X_DIRECTION(x)) { CANNONBALL_SET_NEG_X(x); }
;
	jmp     L024D
L025A:	lda     _collision_R
	cmp     #$02
	lda     #$00
	bcc     L025F
	ldy     _x
	lda     _enemies_flags,y
	and     #$40
	beq     L025F
	ldy     _x
	lda     _enemies_flags,y
	and     #$BF
L024D:	sta     _enemies_flags,y
;
; enemy_is_using_bg_collision = 0;
;
	lda     #$00
L025F:	sta     _enemy_is_using_bg_collision
;
; if (BOSS_FIREBALL_COOLDOWN) { --BOSS_FIREBALL_COOLDOWN; }
;
	lda     _boss_memory+1
	beq     L00FB
	dec     _boss_memory+1
;
; else {
;
	jmp     L0100
;
; if (rand8() > 250) { 
;
L00FB:	jsr     _rand8
	cmp     #$FB
	bcc     L0100
;
; boss_shoot_fireball();
;
	jsr     _boss_shoot_fireball
;
; temp1 = enemies_extra[x]; // This gets modified by cannonball_ai_sub.
;
L0100:	ldy     _x
	lda     _enemies_extra,y
	sta     _temp1
;
; temp0 = enemies_timer[x]; // (Already should be set to this)
;
	ldy     _x
	lda     _enemies_timer,y
	sta     _temp0
;
; if (temp0 == temp1) { 
;
	lda     _temp1
	cmp     _temp0
	bne     L010C
;
; boss_state = BOSS_STATE_DESCENDING;
;
	lda     #$03
	sta     _boss_state
;
; enemies_timer[x] = 0;
;
	ldy     _x
	lda     #$00
	sta     _enemies_timer,y
;
; }
;
L010C:	rts

.endproc

; ---------------------------------------------------------------
; void __near__ boss_ai_descending (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_boss_ai_descending: near

.segment	"CODE"

;
; high_byte(temp5) = enemies_nt[x];
;
	ldy     _x
	lda     _enemies_nt,y
	sta     _temp5+1
;
; low_byte(temp5) = enemies_actual_y[x];
;
	ldy     _x
	lda     _enemies_actual_y,y
	sta     _temp5
;
; temp1 = enemies_x[x] + 8; 
;
	ldy     _x
	lda     _enemies_x,y
	clc
	adc     #$08
	sta     _temp1
;
; add_scroll_y(temp5, 1, temp5);
;
	lda     _temp5
	sta     _TEMP
	lda     _temp5+1
	sta     _TEMP+1
	lda     #$01
	jsr     _add_scroll_y_fast_sub
	sta     _temp5
	stx     _temp5+1
;
; add_scroll_y(temp6, 16, temp5); 
;
	lda     _temp5
	sta     _TEMP
	lda     _temp5+1
	sta     _TEMP+1
	lda     #$10
	jsr     _add_scroll_y_fast_sub
	sta     _temp6
	stx     _temp6+1
;
; temp2 = low_byte(temp6); // Y of tile of interest
;
	lda     _temp6
	sta     _temp2
;
; temp4 = high_byte(temp6); // NT of tile of interest
;
	lda     _temp6+1
	sta     _temp4
;
; coordinates = (temp1 >> 4) + (temp2 & 0xf0);
;
	lda     _temp1
	lsr     a
	lsr     a
	lsr     a
	lsr     a
	sta     ptr1
	lda     _temp2
	and     #$F0
	clc
	adc     ptr1
	sta     _coordinates
;
; AsmSet2ByteFromPtrAtIndexVar(temppointer, cmaps, temp4);
;
	lda     _temp4
	asl     a
	tay
	lda     _cmaps,y
	sta     _temppointer
	lda     _cmaps+1,y
	sta     _temppointer+1
;
; AsmSet1ByteFromZpPtrAtIndexVar(collision, temppointer, coordinates);
;
	ldy     _coordinates
	lda     (_temppointer),y
	sta     _collision
;
; if (METATILE_IS_SOLID(collision)) {
;
	ldy     _collision
	lda     _metatile_property_lookup_table,y
	and     #$01
	beq     L017D
;
; temp0 = rand8();
;
	jsr     _rand8
	sta     _temp0
;
; enemies_extra[x] = temp0;
;
	ldy     _x
	lda     _temp0
	sta     _enemies_extra,y
;
; boss_state = BOSS_STATE_IDLE;
;
	lda     #$01
	sta     _boss_state
;
; enemies_nt[x] = high_byte(temp5);
;
L017D:	ldy     _x
	lda     _temp5+1
	sta     _enemies_nt,y
;
; enemies_actual_y[x] = low_byte(temp5);
;
	ldy     _x
	lda     _temp5
	sta     _enemies_actual_y,y
;
; }
;
	rts

.endproc

; ---------------------------------------------------------------
; void __near__ boss_ai_damaged (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_boss_ai_damaged: near

.segment	"CODE"

;
; if (temp0 == 0) {
;
	lda     _temp0
;
; boss_start_flying();
;
	jeq     _boss_start_flying
;
; } else if ((temp0 & 0b11) == 0b11) {
;
	and     #$03
	cmp     #$03
	beq     L0263
;
; }
;
	rts
;
; high_byte(temp5) = enemies_nt[x];
;
L0263:	ldy     _x
	lda     _enemies_nt,y
	sta     _temp5+1
;
; low_byte(temp5) = enemies_actual_y[x];
;
	ldy     _x
	lda     _enemies_actual_y,y
	sta     _temp5
;
; temp1 = enemies_x[x] + 8; 
;
	ldy     _x
	lda     _enemies_x,y
	clc
	adc     #$08
	sta     _temp1
;
; temp6 = sub_scroll_y(1, temp5);
;
	lda     #$01
	jsr     pusha
	lda     _temp5
	ldx     _temp5+1
	jsr     _sub_scroll_y
	sta     _temp6
	stx     _temp6+1
;
; temp2 = low_byte(temp6); // Y of tile of interest
;
	lda     _temp6
	sta     _temp2
;
; temp4 = high_byte(temp6); // NT of tile of interest
;
	lda     _temp6+1
	sta     _temp4
;
; coordinates = (temp1 >> 4) + (temp2 & 0xf0);
;
	lda     _temp1
	lsr     a
	lsr     a
	lsr     a
	lsr     a
	sta     ptr1
	lda     _temp2
	and     #$F0
	clc
	adc     ptr1
	sta     _coordinates
;
; AsmSet2ByteFromPtrAtIndexVar(temppointer, cmaps, temp4);
;
	lda     _temp4
	asl     a
	tay
	lda     _cmaps,y
	sta     _temppointer
	lda     _cmaps+1,y
	sta     _temppointer+1
;
; AsmSet1ByteFromZpPtrAtIndexVar(collision, temppointer, coordinates);
;
	ldy     _coordinates
	lda     (_temppointer),y
	sta     _collision
;
; if (!METATILE_IS_SOLID(collision)) {
;
	ldy     _collision
	lda     _metatile_property_lookup_table,y
	and     #$01
	bne     L01CE
;
; enemies_nt[x] = high_byte(temp6);
;
	ldy     _x
	lda     _temp6+1
	sta     _enemies_nt,y
;
; enemies_actual_y[x] = low_byte(temp6);
;
	ldy     _x
	lda     _temp6
	sta     _enemies_actual_y,y
;
; }
;
L01CE:	rts

.endproc

; ---------------------------------------------------------------
; void __near__ boss_ai_dying (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_boss_ai_dying: near

.segment	"CODE"

;
; if (enemies_timer[x] == 0) {
;
	ldy     _x
	lda     _enemies_timer,y
	bne     L01DE
;
; game_level_advance_behavior = LEVEL_UP_BEHAVIOR_EXIT;
;
	sta     _game_level_advance_behavior
;
; game_mode = MODE_LEVEL_COMPLETE;
;
	lda     #$04
	sta     _game_mode
;
; }
;
L01DE:	rts

.endproc

; ---------------------------------------------------------------
; void __near__ collision_with_boss (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_collision_with_boss: near

.segment	"CODE"

;
; if (IS_SWINGING_SWORD && boss_state == BOSS_STATE_IDLE) {
;
	lda     _player_flags
	and     #$04
	beq     L01ED
	lda     _boss_state
	cmp     #$01
	bne     L01ED
;
; --BOSS_HP;
;
	dec     _boss_memory+2
;
; if (BOSS_HP == 0) {
;
	bne     L0269
;
; boss_state = BOSS_STATE_DYING; // Begin to end the level.
;
	lda     #$05
	sta     _boss_state
;
; sfx_play(SFX_ENEMY_KILL, 0);
;
	lda     #$02
	jsr     pusha
	lda     #$00
	jsr     _sfx_play
;
; } else {
;
	jmp     L01FC
;
; boss_state = BOSS_STATE_DAMAGED;
;
L0269:	lda     #$04
	sta     _boss_state
;
; enemies_timer[x] = 127; // ~2 seconds of iframes (these will be incremented until it overflows)
;
L01FC:	ldy     _x
	lda     #$7F
	sta     _enemies_timer,y
;
; } else if (boss_state_deadliness[boss_state]) {
;
	rts
L01ED:	ldy     _boss_state
	lda     _boss_state_deadliness,y
	beq     L0204
;
; if (!STATUS_DEAD) {
;
	lda     _player_flags
	and     #$02
	bne     L026A
;
; sfx_play(SFX_SMACK, 0);
;
	lda     #$07
	jsr     pusha
	lda     #$00
	jsr     _sfx_play
;
; music_stop();
;
	jsr     _music_stop
;
; SET_STATUS_DEAD();
;
L026A:	lda     _player_flags
	ora     #$02
	sta     _player_flags
;
; }
;
L0204:	rts

.endproc

; ---------------------------------------------------------------
; void __near__ draw_boss_flying (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_draw_boss_flying: near

.segment	"CODE"

;
; temp3 >>= 2;
;
	lda     _temp3
	lsr     a
	lsr     a
	sta     _temp3
;
; temp3 &= 0b110; // Mask the frame number.
;
	and     #$06
	sta     _temp3
;
; temp4 |= temp3;// | ENEMY_DIRECTION(x);
;
	ora     _temp4
	sta     _temp4
;
; AsmSet2ByteFromPtrAtIndexVar(temppointer, boss_body_sprite_flying_lookup_table, temp4);
;
	asl     a
	tay
	lda     _boss_body_sprite_flying_lookup_table,y
	sta     _temppointer
	lda     _boss_body_sprite_flying_lookup_table+1,y
	sta     _temppointer+1
;
; }
;
	rts

.endproc

; ---------------------------------------------------------------
; void __near__ draw_boss_idle (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_draw_boss_idle: near

.segment	"CODE"

;
; AsmSet2ByteFromPtrAtIndexVar(temppointer, boss_body_sprite_idle_lookup_table, temp4);
;
	lda     _temp4
	asl     a
	tay
	lda     _boss_body_sprite_idle_lookup_table,y
	sta     _temppointer
	lda     _boss_body_sprite_idle_lookup_table+1,y
	sta     _temppointer+1
;
; }
;
	rts

.endproc

; ---------------------------------------------------------------
; void __near__ draw_boss_dying (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_draw_boss_dying: near

.segment	"CODE"

;
; temp3 >>= 2;
;
	lda     _temp3
	lsr     a
	lsr     a
	sta     _temp3
;
; temp3 &= 0b11;
;
	and     #$03
	sta     _temp3
;
; AsmSet2ByteFromPtrAtIndexVar(temppointer, boss_dying_sprite_lookup_table, temp3);
;
	asl     a
	tay
	lda     _boss_dying_sprite_lookup_table,y
	sta     _temppointer
	lda     _boss_dying_sprite_lookup_table+1,y
	sta     _temppointer+1
;
; music_stop();
;
	jmp     _music_stop

.endproc

; ---------------------------------------------------------------
; void __near__ boss_shoot_fireball (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_boss_shoot_fireball: near

.segment	"CODE"

;
; temp1 = x + 4;
;
	lda     _x
	clc
	adc     #$04
	sta     _temp1
;
; for (temp_x = x+1; temp_x < temp1; ++temp_x) {
;
	lda     _x
	clc
	adc     #$01
	sta     _temp_x
	ldx     #$00
L026B:	lda     _temp_x
	cmp     _temp1
	txa
	sbc     #$00
	bcc     L026D
;
; }
;
	rts
;
; if (IS_ENEMY_ACTIVE(temp_x)) { continue; } // ENEMY_NONE
;
L026D:	ldy     _temp_x
	lda     _enemies_flags,y
	and     #$80
	jne     L026C
;
; enemies_type[temp_x] = ENEMY_BOSS_FIREBALL;
;
	ldy     _temp_x
	lda     #$0B
	sta     _enemies_type,y
;
; temp0 = enemies_x[x] + 6;
;
	ldy     _x
	lda     _enemies_x,y
	clc
	adc     #$06
	sta     _temp0
;
; temp1 = enemies_actual_y[x] + 6;
;
	ldy     _x
	lda     _enemies_actual_y,y
	clc
	adc     #$06
	sta     _temp1
;
; temp2 = enemies_nt[x];
;
	ldy     _x
	lda     _enemies_nt,y
	sta     _temp2
;
; enemies_x[temp_x] = temp0;
;
	ldy     _temp_x
	lda     _temp0
	sta     _enemies_x,y
;
; enemies_actual_y[temp_x] = temp1;
;
	ldy     _temp_x
	lda     _temp1
	sta     _enemies_actual_y,y
;
; enemies_nt[temp_x] = temp2;
;
	ldy     _temp_x
	lda     _temp2
	sta     _enemies_nt,y
;
; temp0 = high_byte(valrigard.x) + (VALRIGARD_WIDTH/2);
;
	lda     _valrigard+1
	clc
	adc     #$05
	sta     _temp0
;
; temp1 = high_byte(valrigard.y) + 4;
;
	lda     _valrigard+3
	clc
	adc     #$04
	sta     _temp1
;
; temp2 = enemies_x[x] + 6; // ENEMY_WIDTH/2
;
	ldy     _x
	lda     _enemies_x,y
	clc
	adc     #$06
	sta     _temp2
;
; enemies_x[temp_x] = temp2;
;
	ldy     _temp_x
	lda     _temp2
	sta     _enemies_x,y
;
; temp3 = enemies_y[x] + 6; // ENEMY_HEIGHT/2
;
	ldy     _x
	lda     _enemies_y,y
	clc
	adc     #$06
	sta     _temp3
;
; enemies_y[temp_x] = temp3;
;
	ldy     _temp_x
	lda     _temp3
	sta     _enemies_y,y
;
; fire_at_target();
;
	jsr     _fire_at_target
;
; enemies_timer[temp_x] = temp0; // the brads value for this fireball.
;
	ldy     _temp_x
	lda     _temp0
	sta     _enemies_timer,y
;
; BOSS_FIREBALL_COOLDOWN = 32;
;
	lda     #$20
	sta     _boss_memory+1
;
; sfx_play(SFX_CANNON_FIRE, 0);
;
	lda     #$03
	jsr     pusha
	lda     #$00
	jmp     _sfx_play
;
; for (temp_x = x+1; temp_x < temp1; ++temp_x) {
;
L026C:	inc     _temp_x
	jmp     L026B

.endproc

; ---------------------------------------------------------------
; void __near__ boss_start_flying (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_boss_start_flying: near

.segment	"CODE"

;
; boss_state = BOSS_STATE_ASCENDING;
;
	lda     #$02
	sta     _boss_state
;
; temp0 = enemies_x[x];
;
	ldy     _x
	lda     _enemies_x,y
	sta     _temp0
;
; temp0 += rand8() & 0b00111111; // x -- MSB is sign
;
	jsr     _rand8
	and     #$3F
	clc
	adc     _temp0
	sta     _temp0
;
; temp1 = enemies_y[x];
;
	ldy     _x
	lda     _enemies_y,y
	sta     _temp1
;
; temp1 += rand8() & 0b00111111; // y -- MSB is sign
;
	jsr     _rand8
	and     #$3F
	clc
	adc     _temp1
	sta     _temp1
;
; temp2 = enemies_x[x];
;
	ldy     _x
	lda     _enemies_x,y
	sta     _temp2
;
; temp3 = enemies_y[x];
;
	ldy     _x
	lda     _enemies_y,y
	sta     _temp3
;
; temp_x = x;
;
	lda     _x
	sta     _temp_x
;
; fire_at_target();
;
	jsr     _fire_at_target
;
; BOSS_BRADS_TARGET = temp0;
;
	lda     _temp0
	sta     _boss_memory
;
; }
;
	rts

.endproc

; ---------------------------------------------------------------
; void __near__ boss_ai_intro (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_boss_ai_intro: near

.segment	"CODE"

;
; SET_DIRECTION_RIGHT();
;
	lda     _player_flags
	ora     #$01
	sta     _player_flags
;
; active_dboxdata = boss_dialog;
;
	lda     #<(_active_dboxdata)
	ldx     #>(_active_dboxdata)
	jsr     pushax
	lda     #<(_boss_dialog)
	ldx     #>(_boss_dialog)
	jsr     pushax
	ldx     #$00
	lda     #$05
	jsr     _memcpy
;
; BOSS_HP = 3;
;
	lda     #$03
	sta     _boss_memory+2
;
; trigger_dialog_box();
;
	jsr     _trigger_dialog_box
;
; music_play(BOSS_SONG);
;
	lda     #$03
	jsr     _music_play
;
; boss_state = BOSS_STATE_DESCENDING;
;
	lda     #$03
	sta     _boss_state
;
; }
;
	rts

.endproc

; ---------------------------------------------------------------
; void __near__ boss_collide_sub (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_boss_collide_sub: near

.segment	"CODE"

;
; coordinates = (temp1 >> 4) + (temp3 & 0xf0); 
;
	lda     _temp1
	lsr     a
	lsr     a
	lsr     a
	lsr     a
	sta     ptr1
	lda     _temp3
	and     #$F0
	clc
	adc     ptr1
	sta     _coordinates
;
; temp0 = high_byte(temp5);
;
	lda     _temp5+1
	sta     _temp0
;
; AsmSet2ByteFromPtrAtIndexVar(temp_mutablepointer, cmaps, temp0);
;
	asl     a
	tay
	lda     _cmaps,y
	sta     _temp_mutablepointer
	lda     _cmaps+1,y
	sta     _temp_mutablepointer+1
;
; AsmSet1ByteFromZpPtrAtIndexVar(temp4, temp_mutablepointer, coordinates);
;
	ldy     _coordinates
	lda     (_temp_mutablepointer),y
	sta     _temp4
;
; temp0 = metatile_property_lookup_table[temp4];
;
	ldy     _temp4
	lda     _metatile_property_lookup_table,y
	sta     _temp0
;
; collision = METATILE_IS_SOLID(temp4);
;
	ldy     _temp4
	lda     _metatile_property_lookup_table,y
	and     #$01
	sta     _collision
;
; }
;
	rts

.endproc

